<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Manual · HydroPowerModels.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>HydroPowerModels.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="index.html">Home</a></li><li class="current"><a class="toctext" href="getstarted.html">Manual</a><ul class="internal"><li><a class="toctext" href="#Getting-started-1">Getting started</a></li><li><a class="toctext" href="#Getting-Results-1">Getting Results</a></li><li><a class="toctext" href="#Plotting-Results-1">Plotting Results</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li><a href="getstarted.html">Manual</a></li></ul><a class="edit-page" href="https://github.com/andrewrosemberg/HydroPowerModels.jl/blob/master/docs/src/getstarted.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Manual</span><a class="fa fa-bars" href="#"></a></div></header><h2><a class="nav-anchor" id="Getting-started-1" href="#Getting-started-1">Getting started</a></h2><p>If you want to use the parallel features of HydroPowerModels.jl, you should start Julia with some worker processes (<code>julia -p N</code>), or add by running <code>julia&gt; addprocs(N)</code> in a running Julia session.</p><p>Once PowerModels, SDDP and a solver (like Clp or Ipopt) are installed, and a case data folder (e.g. &quot;case3&quot;) has been acquired, an Hydrothermal Multistage Steady-State Power Network Optimization can be executed.</p><p>First import the necessary packages:</p><pre><code class="language-julia">using HydroPowerModels
using JuMP, PowerModels, SDDP
using Ipopt, Clp</code></pre><p>Load Case by passing the respective folder:</p><pre><code class="language-julia">data = HydroPowerModels.parse_folder(&quot;case3_folderpath&quot;)</code></pre><p>Set Parameters to run, for example, an DC Economic Hydrothermal Dispatch:</p><pre><code class="language-julia">params = set_param( 
    stages = 3, 
    model_constructor_grid  = DCPPowerModel,
    post_method             = PowerModels.post_opf,
    solver                  = ClpSolver())</code></pre><p>Build and Model and execute the SDDP method:</p><pre><code class="language-julia">m = hydrovalleymodel(data, params)

status = solve(m, iteration_limit = 60)</code></pre><p>Simulate 100 Instances of the problem:</p><pre><code class="language-julia">results = simulate_model(m, 100)</code></pre><h2><a class="nav-anchor" id="Getting-Results-1" href="#Getting-Results-1">Getting Results</a></h2><p>The simulate_model command in HydroPowerModels returns a detailed execution data in the form of a dictionary.</p><p>For example, the algorithm&#39;s runtime and original case data can be accessed with:</p><pre><code class="language-julia">result[&quot;solve_time&quot;]
result[&quot;data&quot;]</code></pre><p>Simulation results are found in the simulations array inside the dictionary. For example, information about the 10th simulation, as objective value and sampled noise, may be accessed with:</p><pre><code class="language-julia">result[&quot;simulation&quot;][10]
result[&quot;simulation&quot;][10][&quot;objective&quot;]
result[&quot;simulation&quot;][10][&quot;noise&quot;]</code></pre><p>The &quot;solution&quot; field contains detailed information about the grid solution returned by the PowerModels package, like generation and bus informations, as well as reservoirs menagement information, like outflow and spillage. For example, the active generation of the 2th generator and the outflow of the 1st reservoir on the second stage and first markov state can be inspect by:</p><pre><code class="language-julia">results[&quot;simulations&quot;][1][&quot;solution&quot;][2][1][&quot;gen&quot;][&quot;2&quot;][&quot;pg&quot;]

results[&quot;simulations&quot;][1][&quot;solution&quot;][2][1][&quot;reservoirs&quot;][&quot;1&quot;][&quot;outflow&quot;]</code></pre><h2><a class="nav-anchor" id="Plotting-Results-1" href="#Plotting-Results-1">Plotting Results</a></h2><p>In order to plot the results returned by the simulate_model function, you may choose from a variety of methods.</p><p>It helps to organize values of a variable for all simulations and stages into a matrix. For example, to plot the values of the active generation from the 1st to the 3rd generator:</p><pre><code class="language-julia">baseMVA =  [results[&quot;simulations&quot;][i][&quot;solution&quot;][j][&quot;baseMVA&quot;] for i=1:100, j=1:12]&#39;

scen_gen = [[results[&quot;simulations&quot;][i][&quot;solution&quot;][j][&quot;gen&quot;][&quot;$gen&quot;][&quot;pg&quot;] for i=1:100, j=1:12]&#39;.*baseMVA for gen =1:3]</code></pre><p>Then just choose a plot function:</p><pre><code class="language-julia">plt =   [plot(median(scen_gen[gen],2), title  = &quot;Termo Generation $gen&quot;,
            ylabel = &quot;MWh&quot;,
            ribbon=(median(scen_gen[gen],2)-map(i-&gt;quantile(scen_gen[gen][i,:],0.05), 1:12),map(i-&gt;quantile(scen_gen[gen][i,:],0.95), 1:12)-median(scen_gen[gen],2))     
            )
        for gen =1:3
]
plot(plt...,legend=false)</code></pre><p>For those familiar with the plot functions from SDDP.jl, they may also be used here. For example, to plot the active generation from the 3rd generator and the volume of the 1st reservoir for all stages and simulations:</p><pre><code class="language-julia">plt = SDDP.newplot()

SDDP.addplot!(plt,
    1:100, 1:params[&quot;stages&quot;],
    (i, t)-&gt;results[&quot;simulations&quot;][i][&quot;solution&quot;][t][&quot;gen&quot;][&quot;3&quot;][&quot;pg&quot;]*results[&quot;simulations&quot;][i][&quot;solution&quot;][t][&quot;baseMVA&quot;],
    title  = &quot;Hydro Generation&quot;,
    ylabel = &quot;MWh&quot;
)

SDDP.addplot!(plt,
    1:100, 1:params[&quot;stages&quot;],
    (i, t)-&gt;results[&quot;simulations&quot;][i][&quot;solution&quot;][t][&quot;reservoirs&quot;][&quot;1&quot;][&quot;volume&quot;],
    title  = &quot;volume&quot;,
    ylabel = &quot;L&quot;
)
SDDP.show(plt)</code></pre><footer><hr/><a class="previous" href="index.html"><span class="direction">Previous</span><span class="title">Home</span></a></footer></article></body></html>
